cTESTCOMMAND: mppl --allocate
c test allocate

      allocate(foo(10), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(2:10), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(10,20), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(2:10,30), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(2:10,3:30), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(bar(1)), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(10), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)
      allocate(bar(20), stat=err)
      if (stat .ne. 0) call baserror('Error allocating bar in ?')
      call register_address(bar)


      allocate(foo(10), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)


      allocate(foo(10), stat=err)
      if (stat .ne. 0) call baserror('Error allocating foo in ?')
      call register_address(foo)
      allocate(bar(20), stat=err)
      if (stat .ne. 0) call baserror('Error allocating bar in ?')
      call register_address(bar)


      call deregister_address(foo)
      deallocate(foo)


      call deregister_address(foo)
      deallocate(foo)
      call deregister_address(bar)
      deallocate(bar)


      end



      subroutine foo
cProlog

      name = 'foo'
      (10)
      shape = 1,10


      name = 'foo'
      (2:10)
      shape = 2,10


      name = 'foo'
      (10,20)
      shape = 1,10,1,20


      name = 'foo'
      (2:10,30)
      shape = 2,10,1,30


      name = 'foo'
      (2:10,3:30)
      shape = 2,10,3,30


      end
